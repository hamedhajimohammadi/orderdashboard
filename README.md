# ๐ฆ PGem Order Management System (OMS)

ุงู ูพุฑูฺู ฺฉ ุณุณุชู ุฌุงูุน ูุฏุฑุช ุณูุงุฑุดุงุช (OMS) ุจุฑุง **PGem Shop** ุงุณุช ฺฉู ุจุง ูุฏู ุจูููโุณุงุฒ ูุฑุขูุฏ ูพุฑุฏุงุฒุด ุณูุงุฑุดุงุชุ ูุงูุชูุฑูฺฏ ุนููฺฉุฑุฏ ูพุฑุณูู ู ูุฏุฑุช ุตูโูุง ุงูุชุธุงุฑ ุทุฑุงุญ ุดุฏู ุงุณุช.

---

## ๐ ุชฺฉููููฺโูุง ุงุณุชูุงุฏู ุดุฏู (Tech Stack)

- **Framework**: Next.js 16.1.1 (App Router)
- **Language**: TypeScript / JavaScript
- **Database**: PostgreSQL
- **ORM**: Prisma
- **State Management**: Zustand
- **Styling**: Tailwind CSS
- **Authentication**: JWT (Jose + Bcrypt)
- **Icons**: Lucide React

---

## ๐ ุฑุงูููุง ูุตุจ ู ุงุฌุฑุง (Getting Started)

### ฑ. ูพุดโูุงุฒูุง
- Node.js ูุณุฎู 18 ุง ุจุงูุงุชุฑ
- PostgreSQL ูุตุจ ู ุฏุฑ ุญุงู ุงุฌุฑุง ุจุงุดุฏ.

### ฒ. ูุตุจ ูุงุจุณุชฺฏโูุง
```bash
npm install
```

### ณ. ุชูุธูุงุช ูุญุท (.env)
ูุงู `.env` ุฑุง ุฏุฑ ุฑุดู ูพุฑูฺู ุจุณุงุฒุฏ ู ููุงุฏุฑ ุฒุฑ ุฑุง ุชูุธู ฺฉูุฏ:

```env
# Database Connection
DATABASE_URL="postgresql://postgres:password@localhost:5432/pgem_oms?schema=public"

# WooCommerce API (ุจุฑุง ุฏุฑุงูุช ุณูุงุฑุดุงุช ู ุณูฺฉ ูุถุนุช)
WC_SITE_URL="https://pgemshop.com"
WC_CONSUMER_KEY="ck_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
WC_CONSUMER_SECRET="cs_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"

# Authentication
JWT_SECRET="your-secure-secret-key"
```

### ด. ุฑุงูโุงูุฏุงุฒ ุฏุชุงุจุณ
```bash
npx prisma generate
npx prisma db push
```

### ต. ุงุฌุฑุง ูพุฑูฺู
```bash
npm run dev
```
ุฏุณุชุฑุณ ุฏุฑ: `http://localhost:3000`

---

## ๐ ูฺฺฏโูุง ูพุงุฏูโุณุงุฒ ุดุฏู (Admin Panel)

### ฑ. ุฏุงุดุจูุฑุฏ ุงุฏูู (Admin Dashboard)
- **ูุฒ ฺฉุงุฑ (Active Slots)**: ูุฑ ุงุฏูู ด ุงุณูุงุช ุฎุงู ุฏุงุฑุฏ. ุณูุงุฑุดุงุช ุฑุฒุฑู ุดุฏู ุฏุฑ ุงูุฌุง ููุงุด ุฏุงุฏู ูโุดููุฏ.
- **ุตู ุงูุชุธุงุฑ (Marketplace)**: ูุณุช ุณูุงุฑุดุงุช ุฌุฏุฏ (`processing`) ฺฉู ูููุฒ ุชูุณุท ฺฉุณ ุจุฑุฏุงุดุชู ูุดุฏูโุงูุฏ.
- **ุฌุณุชุฌู ููุดููุฏ**: ุงูฺฉุงู ุฌุณุชุฌู ุฏุฑ ุตู ุงูุชุธุงุฑ ุจุง ูพุดุชุจุงู ุงุฒ ุงุนุฏุงุฏ ูุงุฑุณ ู ุงูฺฏูุณ.
- **ุชุงูุฑ ููุดููุฏ**: ููุงุด ุฒูุงู ุณูพุฑ ุดุฏู ุงุฒ ูุญุธู ุซุจุช ุณูุงุฑุด ุจุง ุฑูฺฏโุจูุฏ ูุดุฏุงุฑุฏููุฏู.

### ฒ. ูุฏุฑุช ุณูุงุฑุด (Order Processing)
- **ุฑุฒุฑู ุณูุงุฑุด**: ุงูุชูุงู ุณูุงุฑุด ุงุฒ ุตู ุงูุชุธุงุฑ ุจู ูุฒ ฺฉุงุฑ ุงุฏูู.
- **ุชฺฉูู ุณูุงุฑุด**: ุซุจุช ูุถุนุช `completed` ุฏุฑ ุฏุชุงุจุณ ู ุงุฑุณุงู ุฏุฑุฎูุงุณุช ุจู ููฺฉุงูุฑุณ ุจุฑุง ุชุบุฑ ูุถุนุช.
- **ุงูุตุฑุงู (Release)**: ุจุงุฒฺฏุฑุฏุงูุฏู ุณูุงุฑุด ุจู ุตู ุงูุชุธุงุฑ ุจุฑุง ุณุงุฑ ุงุฏููโูุง.
- **ุงุฏุฏุงุดุช ู ุชุงูโูุงู**: ุซุจุช ุงุฏุฏุงุดุชโูุง ุณุณุชู ู ุฏุณุช ุจุฑุง ูุฑ ุณูุงุฑุด (ูุงฺฏ ุชุบุฑุงุช).

### ณ. ุขูุงุฑ ู ุนููฺฉุฑุฏ (Admin Stats)
- **ฺฏุฒุงุฑุด ุนููฺฉุฑุฏ**: ูุดุงูุฏู ุชุนุฏุงุฏ ุณูุงุฑุดุงุช ุงูุฌุงู ุดุฏูุ ูุงูฺฏู ุฒูุงู ุงูุฌุงู ู ุฏุฑุขูุฏ ุชูุฑุจ.
- **ููุชุฑ ุฒูุงู**: ุงูฺฉุงู ูุดุงูุฏู ุขูุงุฑ ุงูุฑูุฒุ ุฏุฑูุฒุ ููุชูุ ูุงู ู **ุจุงุฒู ุฒูุงู ุฏูุฎูุงู**.
- **ูุญุงุณุจู ุฏุฑุขูุฏ**: ุจุฑ ุงุณุงุณ `bonus_rate` ุชุนุฑู ุดุฏู ุจุฑุง ูุฑ ุงุฏูู.

### ด. ุฌุณุชุฌู ุฌุงูุน (Global Search)
- ุชุจ ุฌุฏุงฺฏุงูู ุจุฑุง ุฌุณุชุฌู ฺฉู ุณูุงุฑุดุงุช (ุชฺฉูู ุดุฏูุ ุฏุฑ ุญุงู ุงูุฌุงู ู ...).
- ููุงุด ูุถุนุช ูุนู ุณูุงุฑุด ู ุงุฏูู ูุณุฆูู.

---

## ๐ง ูุณุชูุฏุงุช ูู (Technical Documentation)

### ุงุชุตุงู ุจู ููฺฉุงูุฑุณ (WooCommerce Integration)
- **ุฏุฑุงูุช ุณูุงุฑุดุงุช**: ุงุฒ ุทุฑู API ููฺฉุงูุฑุณ (`/wp-json/wc/v3/orders`) ุงูุฌุงู ูโุดูุฏ.
- **ููฺฏุงูโุณุงุฒ**:
  - ุงุณฺฉุฑูพุช `import-orders.ts` ุจุฑุง ุงููพูุฑุช ุงููู.
  - ูุจโููฺฉโูุง (Webhooks) ุจุฑุง ุฏุฑุงูุช ูุญุธูโุง ุณูุงุฑุดุงุช ุฌุฏุฏ (ุฏุฑ ูุณุฑ `/api/webhook/woocommerce`).
- **ฺฉูฺฉโูุง**: ุจุฑุง ุฏุฑุฎูุงุณุชโูุง ุฎุงุต (ูุซู ุฏุฑุงูุช ููุชโูุง ุณูุงุฑุด)ุ ฺฉูฺฉโูุง ุงุฏูู ูุฑุฏูพุฑุณ ุฏุฑ ูุฏุฑ ุฏุฑุฎูุงุณุช ุงุฑุณุงู ูโุดููุฏ (ุฏุฑ `api/notes/route.js`).

### ูุฏุฑุช ูุถุนุช (State Management)
ุงุฒ **Zustand** (`store/useOrderStore.js`) ุจุฑุง ูุฏุฑุช ูุถุนุช ุฌูุงู ุงุณุชูุงุฏู ุดุฏู ุงุณุช:
- `pendingOrders`: ูุณุช ุณูุงุฑุดุงุช ุตู ุงูุชุธุงุฑ.
- `activeOrders`: ุณูุงุฑุดุงุช ุฏุฑ ุฏุณุช ุงูุฏุงู ุงุฏูู ุฌุงุฑ.
- `isOnline`: ูุถุนุช ุญุถูุฑ ู ุบุงุจ ุงุฏูู.
- `dailyStats`: ุขูุงุฑ ุฑูุฒุงูู (ุชุงุฑฺฏุช ู ุชุนุฏุงุฏ ุงูุฌุงู ุดุฏู).

### ุฏุชุงุจุณ (Prisma Schema)
ูุฏูโูุง ุงุตู:
- `User`: ุงุทูุงุนุงุช ุงุฏููโูุงุ ููุดโูุง (`admin`, `supervisor`)ุ ูุฑุฎ ูพุงุฏุงุด ู ูุถุนุช ุขููุงู.
- `Order`: ุงุทูุงุนุงุช ุณูุงุฑุดุ ูุถุนุช (`pending`, `processing`, `completed`)ุ ุฒูุงูโุจูุฏโูุง (`assigned_at`, `completed_at`) ู ุงุฏูู ูุณุฆูู (`operator_name`).
- `OrderNote`: ูุงฺฏโูุง ู ุงุฏุฏุงุดุชโูุง ูุฑุจูุท ุจู ูุฑ ุณูุงุฑุด.

### ุงุญุฑุงุฒ ููุช (Authentication)
- ุณุณุชู ูุงฺฏู ุงุฎุชุตุงุต ุจุง ุงุณุชูุงุฏู ุงุฒ `JWT`.
- ุชูฺฉู ุฏุฑ ฺฉูฺฉ `adminToken` ุฐุฎุฑู ูโุดูุฏ (HttpOnly).
- ูุฏููุฑ ุง ฺฺฉโูุง ุณูุช ุณุฑูุฑ (`getCurrentUser`) ุจุฑุง ูุญุงูุธุช ุงุฒ APIูุง.

---

## ๐บ ููุดู ุฑุงู (Roadmap)

- [x] ูพูู ุงุฏูู (Dashboard)
- [x] ุณุณุชู ูุงฺฏู ู ุฎุฑูุฌ
- [x] ุขูุงุฑ ุนููฺฉุฑุฏ ุดุฎุต
- [x] ุชุงูโูุงู ู ุงุฏุฏุงุดุชโูุง
- [ ] **ูพูู ุณููพุฑูุงุฒุฑ (Supervisor Panel)** ๐ง *(ูุงุฒ ุจุนุฏ)*
  - ูุงูุชูุฑูฺฏ ุฒูุฏู ุงุฏููโูุง
  - ูุฏุฑุช ุตู ู ุชุฎุตุต ุฏุณุช
  - ฺฏุฒุงุฑุดุงุช ูุงู ู ูุฏุฑุช
